(function(){function e(t,r,a,o,s){var n,i,c,d,l,h,m,p,u;for(n=0,i=t.length;i>n;n++){switch(h=t[n],m={},u=[],d=null,l=h.nodeName.toLowerCase(),m=SVG.parse.attr(h),l){case"rect":case"circle":case"ellipse":d=r[l](0,0);break;case"line":d=r.line(0,0,0,0);break;case"text":if(h.childNodes.length<2)d=r[l](h.textContent);else{var f;for(d=null,c=0;c<h.childNodes.length;c++)f=h.childNodes[c],"#text"!=f.nodeName.toLowerCase()&&"tspan"==f.nodeName.toLowerCase()&&(f.textContent=f.textContent.trim().replace(/\n/g," "," ").match(/[\S]+(\s)*/g).join(" "),null===d?d=r[l](f.textContent):d.tspan(f.textContent).attr(SVG.parse.attr(f)))}break;case"path":d=r.path(m.d);break;case"polygon":case"polyline":d=r[l](m.points);break;case"image":d=r.image(m["xlink:href"]);break;case"g":case"svg":d=r["g"==l?"group":"nested"](),e(h.childNodes,d,a+1,o,s);break;case"defs":e(h.childNodes,r.defs(),a+1,o,s);break;case"use":d=r.use();break;case"clippath":case"mask":d=r["mask"==l?"mask":"clip"](),e(h.childNodes,d,a+1,o,s);break;case"lineargradient":case"radialgradient":d=r.defs().gradient(l.split("gradient")[0],function(e){for(var t=0;t<h.childNodes.length;t++)"#text"!=h.childNodes[t].nodeName.toLowerCase()&&e.at({offset:0}).attr(SVG.parse.attr(h.childNodes[t])).style(h.childNodes[t].getAttribute("style"))});break;case"#comment":case"#text":case"metadata":case"desc":break;case"marker":d=r.defs().marker(h.getAttribute("markerWidth")||0,h.getAttribute("markerHeight")||0),e(h.childNodes,d,a+1,o,s);break;default:console.log("SVG Import got unexpected type "+l,h)}switch(l){case"circle":m.rx=m.r,m.ry=m.r,delete m.r}d&&(p=SVG.parse.transform(m.transform),delete m.transform,d.attr(m).transform(p),d.attr("id")&&o.add(d.attr("id"),d,0==a),"text"==l&&d.rebuild(),"function"==typeof s&&s.call(d,a))}return r}SVG.extend(SVG.Container,{svg:function(t,r){var a=document.createElement("div"),o=new SVG.ImportStore;return a.innerHTML=t.replace(/\n/,"").replace(/<([^\s]+)([^<]+?)\/>/g,"<$1$2></$1>"),e(a.childNodes,this,0,o,r),a=null,o}}),SVG.ImportStore=function(){this._importStoreRoots=new SVG.Set,this._importStore={}},SVG.extend(SVG.ImportStore,{add:function(e,t,r){if(e){if(this._importStore[e]){var a=e;e+=Math.round(1e16*Math.random()),console.warn('Encountered duplicate id "'+a+'". Changed store key to "'+e+'".')}this._importStore[e]=t}return r===!0&&this._importStoreRoots.add(t),this},roots:function(e){return"function"==typeof e?(this._importStoreRoots.each(e),this):this._importStoreRoots.valueOf()},get:function(e){return this._importStore[e]},remove:function(){return this.roots(function(){this.remove()})}})}).call(this);